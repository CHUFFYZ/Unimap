<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIMAP</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/sesionADMIN.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>
    <header>
        <div class="supercontainer">
            <div class="containerlogo">
                <a id="logoweb" class="fl" href="sesionADMIN.html"><img src="../image/logoUNIMAP.webp" alt="LogoUnimap"></a>
            </div>
            <div class="MensajeUNIMAP">
                <div id="nombrelogo">
                    <h2><span>U N I M A P</span></h2>
                    <h4><span>Mapa Interactivo Universitario</span></h4>
                </div>
            </div>
            <!-- Inicio menu---------------------------------------->
        <div class="menu-toggle" id="menu-toggle">&#9776;</div>
        <div class="menu-container" id="menu-container">
         <!-- Fin menu---------------------------------->    
                <div class="containerinfo">
                    <div id="top-navinfo" class="clearfix">
                        <nav class="fr">
                            <a class="btn" href="../index.html">Inicio</a>
                        </nav>
                    </div>
                </div>
                <div class="containerinf1">
                    <div id="top-nav2" class="clearfix">
                        <nav class="fr2">
                            <a class="btn" href="https://www.facebook.com/unacaroficial/posts/estas-son-las-afis-del-mes-de-febrero-para-conocimiento-de-los-alumnos-que-forma/2060377437526977/">Afis</a>
                        </nav>
                    </div>
                </div>
                <div class="containerinf2">
                    <div id="top-nav2" class="clearfix">
                        <nav class="fr2">
                            <a class="btn" href="../index.html">Alumnos</a>
                        </nav>
                    </div>
                </div>
                <div class="container2">
                    <div id="top-nav2" class="clearfix">
                        <nav class="fr2">
                            <a class="btn" href="sesionADMIN.html">Administrativo</a>
                        </nav>
                    </div>
                </div>
                <div class="container3">
                    <div id="top-nav3" class="clearfix">
                        <nav class="fr3">
                            <a href="https://es-la.facebook.com/" target="_blank"><i class="fab fa-facebook-f"></i></a>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

<!-------- New Menu Titulo ------->
        
<div class="fondosupercontainer">
            <div class="inisesion">
            <div class="titulo" id="tituloinicio">
                <h1> Inicio de Sesión </h1>
            </div>
            </div>

        
        
    
        <!-- Cuadro del menú con el título dentro -->
<div class="containerini">
    <div class="logosweb">
        <div class="intalumno" id="inicioalumno">
            <h2> Administrativos </h2>
        </div>
        <div class="logoalum">  
            <a id="logalum"><img src="../image/admin.webp" alt="alumnoslogo"></a>
        </div>     
    </div>
    <!-- Campo de entrada personalizado -->
    <div class="contenedor-matricula">
        <input type="text" class="input-personalizado" placeholder="Matrícula" id="matricula">
    </div>
    <!-- Campo de entrada personalizado -->
    <div class="contenedor-contraseña">
        <input type="password" class="input-personalizado2" placeholder="Contraseña" id="contraseña">
    </div>

    <!-- Apartado de texto y enlace -->
    <div class="contenedor-recuperar">
        <div class="barra"></div>
        <h3>¿Olvidaste la contraseña?</h3>
        <h4><a id="contraseñarecu" href="recuperar_contrasena.html" target="_blank" class="link-recuperar">Presiona aquí</a></h4>
    </div>

<!-- Botones de acción -->
        <div class="contenedor-botones">
<!-- Botón de acceder -->
            <!-- Botón de acceder -->
            <button class="btn-acceder" onclick="acceder2()">Acceder</button>
<!-- Botón de cancelar -->
            <button class="btn-cancelar" onclick="window.location.href='sesionadmin.html'">Cancelar</button>
        </div>
        <script src="../iniciosesion.js"></script> 

</div>
</div>
<!-- Script para manejar placeholders y guardar input -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
    var inputs = document.querySelectorAll('.input-personalizado, .input-personalizado2');

    inputs.forEach(function(input) {
    input.addEventListener('focus', function() {
        this.placeholder = '';
    });
    input.addEventListener('blur', function() {
        if (this.id === 'matricula') {
            this.placeholder = 'Matrícula';
        } else if (this.id === 'contraseña') {
            this.placeholder = 'Contraseña';
        }
    });
    });
    });
</script> 



<script>
    function acceder2() {
        var matricula = document.getElementById('matricula').value;
        var contrasena = document.getElementById('contraseña').value;
        var mensajeError = document.getElementById('mensajeError');
    
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '../verificarsesion2.php', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onload = function() {
            if (xhr.status === 200) {
                console.log(xhr.responseText); // Depuración: muestra la respuesta completa del servidor
                if (xhr.responseText.trim() === 'success') {
                    window.location.href = 'mapaADMIN.html';
                } else if (xhr.responseText.trim() === 'failure') {
                    mensajeError.textContent = 'Matrícula o contraseña incorrecta';
                } else if (xhr.responseText.trim() === 'error') {
                    mensajeError.textContent = 'Error al procesar la solicitud';
                }
            } else {
                console.error('Error al conectar con el servidor');
                mensajeError.textContent = 'Error al conectar con el servidor';
            }
        };
        xhr.send('matricula=' + encodeURIComponent(matricula) + '&contrasena=' + encodeURIComponent(contrasena));
    }
    </script>
    

    <!-- funcion de ocultar por ciertos eventos--------------------------------------->
 
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var menuToggle = document.getElementById('menu-toggle');
        var menuContainer = document.getElementById('menu-container');

        menuToggle.addEventListener('click', function (event) {
            event.stopPropagation();
            if (menuContainer.classList.contains('active')) {
                menuContainer.classList.add('exit');
                setTimeout(() => {
                    menuContainer.classList.remove('active');
                    menuContainer.classList.remove('exit');
                }, 300); // La duración debe coincidir con la duración de la animación CSS
            } else {
                menuContainer.classList.add('active');
            }
        });

        // Cerrar el menú al hacer clic fuera de él
        document.addEventListener('click', function (event) {
            if (!menuContainer.contains(event.target) && !menuToggle.contains(event.target)) {
                if (menuContainer.classList.contains('active')) {
                    menuContainer.classList.add('exit');
                    setTimeout(() => {
                        menuContainer.classList.remove('active');
                        menuContainer.classList.remove('exit');
                    }, 300); // La duración debe coincidir con la duración de la animación CSS
                }
            }
        });

        // Cerrar el menú al cambiar el tamaño de la pantalla
        window.addEventListener('resize', function () {
            if (window.innerWidth > 768) {
                if (menuContainer.classList.contains('active')) {
                    menuContainer.classList.add('exit');
                    setTimeout(() => {
                        menuContainer.classList.remove('active');
                        menuContainer.classList.remove('exit');
                    }, 300); // La duración debe coincidir con la duración de la animación CSS
                }
            }
        });
    });
</script>

